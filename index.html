<!DOCTYPE html>
<html>
<head>
  <title>Weather</title>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  
  
  <link rel="stylesheet" type="text/css" href="css/main.css">
  <script src="js/script.js"></script>
  
  <script type="text/javascript">
  
	

	$(document).ready(function() {
		$("button").click(function() {
			  //var f = "https://libris.kb.se/xsearch?query=August+Strindberg&n=10&format=json";
var f = "https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=05b05226efce66d39e0675947304f0fe&text=clear&format=json&nojsoncallback=1";
			$.getJSON(f, 
				function(data) {
				
				objekt =data.photos.photo[0];
farm =objekt.farm;
    console.log("farm: "+farm);
serverId =objekt.server;
  console.log("server: "+serverId);
  id =objekt.id;
  console.log("id: "+ id);
    secret =objekt.secret;
  console.log("secret: " + secret);

  var zelda= "https://farm" + farm + ".staticflickr.com/" + serverId + "/" + id + "_" + secret + ".jpg";
  
  
var blaha= '<img id="theImg" src=' + zelda+ '/>';
	$('#theDiv').prepend(blaha)
		
					/*
					$("#hej").append(data.xsearch.from);
					$.each(data.xsearch.list, function(i, obj) {
						var post = "<article>";
						post += "<h1>" + obj.title + "</h1>";
						post += "<p>" + obj.creator + "</p>";
						post += "<ul>";
						//for(var i in obj.tags)
						//{
							//post += "<li>" + obj.tags[i] + "</li>";
						//}
						post += "</ul>";
						post += "</article>";
						$("#blogposts").append(post);
						*/
					});
					
			//});
		// console.log(la+" "+lo);
	getLocation();
		
		function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else { 
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
   // x.innerHTML = "Latitude: " + position.coords.latitude + 
    //"<br>Longitude: " + position.coords.longitude;
	
	 la_ =  position.coords.latitude;
	lo_= position.coords.longitude;
	
	loadWeatherData(la_, lo_);
	
	
}

function loadWeatherData(lat, lon) {
 $.ajax({
         url: "https://api.aerisapi.com/observations/" + lat + "," + lon + "?client_id=2DLZxkOpvYq3SA8X4Ny4s&client_secret=h3ado5fV7TbT7RTvDsEnrat6hHBmCHHhypZFUPvM",
         dataType: "jsonp",
         success: function(json) {
            if (json.success == true) {
               var ob = json.response.ob;
               $('#hej').html('The current weather is ' + ob.weather.toLowerCase() + ' with a temperature of ' + ob.tempC + '°');
            }
            else {
               alert('An error occurred: ' + json.error.description);
            }
         }
      });
	  }



	


		});
	});
	

	</script>
</head>
<body>
<div class="container">
<button type="button" class="btn btn-primary btn-lg">Test</button>
	<div id="blogposts"></div>
		<div id="hej"></div>
			<div id="theDiv">Image?</div>
</div>

<!-- <a href="svdTest.html">Nobelpris</a> -->
</body>
</html